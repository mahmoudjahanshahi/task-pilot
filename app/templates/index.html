<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TaskPilot</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function showSpinner() {
      document.getElementById("spinner").classList.remove("hidden");
    }
  </script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans min-h-screen">

  <div class="max-w-3xl mx-auto py-10 px-6">
    <h1 class="text-3xl font-bold mb-6 text-center">ğŸ§  TaskPilot</h1>

    <form method="post" onsubmit="showSpinner()" class="mb-6">
      <textarea name="input_text" rows="6" required
        class="w-full p-4 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Paste your notes here and TaskPilot will extract the action items for you!">{{ input_text or '' }}</textarea>
      <button type="submit"
        class="mt-4 bg-blue-600 text-white font-semibold px-6 py-2 rounded hover:bg-blue-700">
        âœ¨ Run Agents
      </button>
    </form>

    <div id="spinner" class="text-center mt-4 hidden">
      <p class="text-gray-600 italic animate-pulse">â³ Running agents...</p>
    </div>

    {% if cleaned %}
    <div class="space-y-6 mt-10">
      <div>
        <h2 class="text-xl font-semibold text-blue-700 mb-2">ğŸ§½ Cleaned</h2>
        <pre class="bg-white p-4 rounded border border-gray-200 whitespace-pre-wrap">{{ cleaned }}</pre>
      </div>

      <div>
        <h2 class="text-xl font-semibold text-green-700 mb-2">ğŸ“ Summary</h2>
        <pre class="bg-white p-4 rounded border border-gray-200 whitespace-pre-wrap">{{ summary }}</pre>
      </div>

      <div>
        <h2 class="text-xl font-semibold text-purple-700 mb-2">âœ… Action Items</h2>
        <pre class="bg-white p-4 rounded border border-gray-200 whitespace-pre-wrap">{{ tasks }}</pre>
      </div>
    </div>
    {% endif %}
  </div>

</body>
</html>
